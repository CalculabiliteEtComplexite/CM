% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: <Nom de la partie>
% Section: <Nom de la section>
% Sub-section: <Nom de la sous-section>  % (facultatif, laisser vide si non utilisé)
% Frame: <Titre de la slide>

\begingroup

\begin{frame}{Exemple -- Fonction calculable à plusieurs arguments}

  \onBlock[top=-2mm]{Addition de deux nombres entiers}{
    \begin{itemize}
    \item Entrées : $a$ et $b$, sur leur ruban respectif
    \item Sortie : $a + b$, sur le ruban $c$
    \end{itemize}
  }

  \on[x=-23mm, y=5mm]{
    \begin{tikzpicture}[tape, x=5mm, y=5mm]
      \node{a :};
      \cell{}    \smheadb<11>
      \cell{$0$} \smhead<1,10,12>
      \cell{$1$} \smheadb<9>
      \cell{$0$} \smheadb<8>
      \cell{$0$} \smheadb<7>
      \cell{$1$} \smheadb<6>
      \cell{$0$} \smheadb<5>
      \cell{$1$} \smheadb<4>
      \cell{$0$} \smheadb<3>
      \cell{}    \smheadfromb<2>{-8}
    \end{tikzpicture}
  }
  \on[x=-23mm, y=-5mm]{
    \begin{tikzpicture}[tape, x=5mm, y=5mm]
      \node{b :};
      \cell{}    \smheadb<11>
      \cell{$0$} \smhead<1,10,12>
      \cell{$0$} \smheadb<9>
      \cell{$0$} \smheadb<8>
      \cell{$0$} \smheadb<7>
      \cell{$1$} \smheadb<6>
      \cell{$1$} \smheadb<5>
      \cell{$0$} \smheadb<4>
      \cell{$0$} \smheadb<3>
      \cell{}    \smheadfromb<2>{-8}
    \end{tikzpicture}
  }

  \on[x=-23mm, y=-15mm]{
    \begin{tikzpicture}[tape, x=5mm, y=5mm]
      \node{c :};
      \cell{}                 \smheadb<11>
      \cell{$\onlyb<11->{0}$} \smheadb<10,12>
      \cell{$\onlyb<10->{1}$} \smheadb<9>
      \cell{$\onlyb<9->{0}$}  \smheadb<8>
      \cell{$\onlyb<8->{1}$}  \smheadb<7>
      \cell{$\onlyb<7->{0}$}  \smheadb<6>
      \cell{$\onlyb<6->{1}$}  \smheadb<5>
      \cell{$\onlyb<5->{1}$}  \smheadb<4>
      \cell{$\onlyb<4->{0}$}  \smhead<-3>
      \cell{}
    \end{tikzpicture}
  }

  \on[x=35mm, y=0mm]{
    \begin{tikzpicture}[turingMachine, x=18mm, y=25mm]
      \state[alert ob=<{-2}>,initial above]   (a) at (1,2) {a}; 
      \state[alert ob=<{3-6,8-11}>]     (0) at (1,1) {0}; 
      \state[alert ob=<{7}>]            (1) at (0,1) {1}; 
      \state[alert ob=<{12}>,accepting] (f) at (1,0) {f}; 
      
      \scriptsize
      \path (a) edge[loop left] node {\begin{tabular}{@{}c@{}}\smGroup{\smTMtransR[a]{x}{x}\smTMtransR[b]{y}{y}}\\$\forall x, y \in \{0,1\}$\end{tabular}} (a);
      \path (0) edge[loop right] node {$\delta_0$} (0);
      \path (1) edge[loop left]  node {$\delta_1$} (1);
      \path (0) edge[bend left]  node {\smGroup{\smTMtransL[a]{1}{1}\smTMtransL[b]{1}{1}\smTMtransL[c]{\blank}{0}}} (1);
      \path (1) edge[bend left]  node {\smGroup{\smTMtransL[a]{0}{0}\smTMtransL[b]{0}{0}\smTMtransL[c]{\blank}{1}}} (0);
      \path (a) edge             node {\smGroup{\smTMtransL[a]{\blank}{\blank}\smTMtransL[b]{\blank}{\blank}}} (0);
      \path (0) edge             node {\smGroup{\smTMtransR[a]{\blank}{\blank}\smTMtransR[b]{\blank}{\blank}\smTMtransR[c]{\blank}{\blank}}} (f);
    \end{tikzpicture}
  }

  \on[text, bottom]{\scriptsize
    \begin{itemize}
    \item $\delta_0 =
      \left\{\begin{array}{c} a : \smTMtransL{0}{0} \\ b : \smTMtransL{0}{0} \\ c : \smTMtransL{\blank}{0} \end{array}\right.
      \left\{\begin{array}{c} a : \smTMtransL{1}{1} \\ b : \smTMtransL{0}{0} \\ c : \smTMtransL{\blank}{1} \end{array}\right.
      \left\{\begin{array}{c} a : \smTMtransL{0}{0} \\ b : \smTMtransL{1}{1} \\ c : \smTMtransL{\blank}{1} \end{array}\right.
      $
    \item $\delta_1 =
      \left\{\begin{array}{c} a : \smTMtransL{0}{0} \\ b : \smTMtransL{1}{1} \\ c : \smTMtransL{\blank}{0} \end{array}\right.
      \left\{\begin{array}{c} a : \smTMtransL{1}{1} \\ b : \smTMtransL{0}{0} \\ c : \smTMtransL{\blank}{0} \end{array}\right.
      \left\{\begin{array}{c} a : \smTMtransL{1}{1} \\ b : \smTMtransL{1}{1} \\ c : \smTMtransL{\blank}{1} \end{array}\right.
      $
    \end{itemize}
  }
  
\end{frame}

\endgroup
