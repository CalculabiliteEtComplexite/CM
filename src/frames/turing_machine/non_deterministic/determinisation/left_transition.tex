% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: <Nom de la partie>
% Section: <Nom de la section>
% Sub-section: <Nom de la sous-section>  % (facultatif, laisser vide si non utilisé)
% Frame: <Titre de la slide>

\begingroup

\begin{frame}{Simulation de la transition $t = \langle \langle q, a \rangle, \langle q', a', \triangleleft \rangle \rangle$}
  \small
  \begin{block}{Transition avec déplacement vers la gauche}
    \vspace{-2mm}
    \begin{itemize}
    \item Très similaire à un déplacement vers la droite 
      \begin{itemize}
      \item La vérification que la transition s'applique est la même
      \item L'application de la transition est un un plus compliquée
      \item Si l'état $q'$ est accepteur dans $M$, bloquer sur l'état accepteur $2_t$
      \end{itemize}
    \item Attention, cas particulier
      \begin{itemize}
      \item Si \blank à gauche de l'état, prévoir une place supplémentaire
      \end{itemize}
    \end{itemize}
  \end{block}

  \begin{center}
    \scalebox{.7}{\begin{tikzpicture}[shorten >=1pt,node distance=2.5cm,on grid,auto]
        
        \draw [rounded corners, fill=structure!10] (0,-4) rectangle (12,1.5); 
        \draw[structure] (0, 1.5) node[below right] { $\langle \langle q, a \rangle, \langle q', a', \triangleleft \rangle \rangle$}; 

        \draw[structure] (8.75,-1.25) node{$\forall x\in \Gamma$};

        \node  (A0)               {}; 
        \node  (B0) [right=of A0] {}; 
        \node  (C0) [right=of B0] {}; 
        \node  (D0) [right=of C0] {}; 
        \node  (E0) [right=of D0] {}; 
        \node  (F0) [below=of E0] {}; 
        \node  (G0) [left=of F0] {}; 
        \node  (H0) [left=of G0] {}; 
        \node  (I0) [left=of H0] {}; 
        \node  (Z0) [left=of I0] {}; 
        
        \node [fill=structure!20, state, initial, initial text=] (A) at (A0) {$0_t$}; 
        \node [fill=structure!20, state]                         (B) at (B0) {$1_t$}; 
        \node [fill=structure!20, state]                         (C) at (C0) {$2_t$}; 
        \node [fill=structure!20, state]                         (D) at (D0) {$3_t$}; 
        \node [fill=structure!20, state]                         (E) at (E0) {$4_t$}; 
        \node [fill=structure!20, state]                         (F) at (F0) {$5_t$}; 
        \node [fill=structure!20, state]                         (G) at (G0) {$6_t$}; 
        \node [fill=structure!20, state]                         (H) at (H0) {$7_t$}; 
        \node [fill=structure!20, state]                         (I) at (I0) {$8_t$}; 
        \node [fill=structure!20, state]              (Z) at (Z0) {$f_t$}; 

        % A -> B
        \path [->] (A) edge node {\scriptsize$c:\smTMtransR{q}{q}$} (B);

        % B -> C
        \path [->] (B) edge node {\scriptsize $c:\smTMtransL{a}{a}$} (C);

        % C -> C
        \path [->] (C) edge[loop above, looseness=5] node {\scriptsize$c:\smTMtransL{x}{x}$} (C);

        % C -> D
        \path [->] (C) edge node {\scriptsize$\left\{\begin{array}{c}f:\smTMtransR{\sharp}{|}\\c:\smTMtransR{\text{\small \blank}}{\text{\small \blank}}\end{array}\right.$} (D);

        % D -> D
        \path [->] (D) edge[loop above, looseness=5] node {\scriptsize$\left\{\begin{array}{c}f:\smTMtransR{\sharp}{x}\\c:\smTMtransR{x}{x}\end{array}\right.$} (D);

        % D -> E
        \path [->] (D) edge node {\scriptsize$\left\{\begin{array}{c}f:\smTMtransL{\sharp}{a'}\\c:\smTMtransL{q}{q}\end{array}\right.$} (E);

        % E -> E
        \path [->] (E) edge[loop above, looseness=5] node {\scriptsize$\left\{\begin{array}{l}f:\smTMtransR{\mid}{\mid}\\c:\smTMtransR{\text{\small \blank}}{\text{\small \blank}}\end{array}\right.$} (E);

        % E -> F
        \path [->] (E) edge node {\scriptsize$\left\{\begin{array}{c}f:\smTMtransR{x}{q'}\\c:\smTMtransR{x}{x}\end{array}\right.$} (F);

        % F -> G
        \path [->] (F) edge node {\scriptsize$\left\{\begin{array}{c}f:\smTMtransR{\sharp}{x}\\c:\smTMtransR{x}{x}\end{array}\right.$} (G);

        % G -> H
        \path [->] (G) edge node {\scriptsize$c:\smTMtransR{q}{q}$} (H);

        % H -> I
        \path [->] (H) edge node {\scriptsize$\left\{\begin{array}{c}f:\smTMtransR{\sharp}{b}\\c:\smTMtransR{a}{a}\end{array}\right.$} (I);

        % I -> I
        \path [->] (I) edge[loop below, looseness=5] node {\scriptsize$\left\{\begin{array}{c}f:\smTMtransR{\sharp}{x}\\c:\smTMtransR{x}{x}\end{array}\right.$} (I);

        % A -> Z
        \path [->] (A) edge[bend left=10] node {\hspace{-2mm}\scriptsize$\begin{array}{l}c:\smTMtransR{q'}{q'}\\ \forall q' \neq q\\~\end{array}$} (Z);

        % B -> Z
        \path [->] (B) edge node[right] {\scriptsize$\begin{array}{l}c:\smTMtransL{y}{y}\\ \forall y \neq a\end{array}$} (Z);

        % I -> Z
        \path [->] (I) edge node {\scriptsize$c:\smTMtransL{\text{\small \blank}}{\text{\small \blank}}$} (Z);

        % Z -> Z
        \path [->] (Z) edge[loop left, looseness=5, out=-30, in=-60] node[below right] {\hspace{-2mm}\scriptsize$c:\smTMtransL{x}{x}$} (Z);
    \end{tikzpicture}}
  \end{center}
\end{frame}
\endgroup
